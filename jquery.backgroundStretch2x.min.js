/*! jquery.backgroundStretch2x.min.js v1.1.0 | (c) 2014, Benoit Asselin contact(at)ab-d.fr | MIT Licence */
(function(d,n,y){d.fn.backgroundStretch2x=function(b,a){a=d.extend({wait:5E3,fade:2E3,color:"",shuffle:!1,centerX:0.5,centerY:0.5,proportional:!0,onLoad:null,onChange:null,onComplete:null,styles:{left:0,top:0,overflow:"hidden",zIndex:-32E3},template:'<div class="background-stretch-2x"></div>'},a);if(!b||!b.length)return this;var p=d(n);return this.each(function(){function q(){var f=r?p:s,b=f.outerWidth(),g=f.outerHeight(),u=b/g;c.css({width:b,height:g}).children().each(function(){var f=d(this),e=
0,c=0,h=0,k=0,e=0;if(a.proportional){var c=f.data("initWidth"),l=f.data("initHeight"),m=f.data("initRatio");u<m?(e=g/l,c=l*e,e=c*m,h=-Math.floor((e-b)*a.centerX)):(e=b/c,e*=c,c=e/m,k=-Math.floor((c-g)*a.centerY))}else e=b,c=g;f.css({left:h,top:k,width:Math.round(e),height:Math.round(c)})})}function k(a,b){if(a){var g=-1!==a.indexOf("-2x."),g=d('<img class="bs-img-'+(g?"2x":"1x")+'"/>');g.data("loaded",!1).load(function(){var a=d(this);a.css({position:"absolute"}).data("loaded",!0).data("initWidth",
a.width()).data("initHeight",a.height()).data("initRatio",a.width()/a.height());isNaN(a.data("initRatio"))?setTimeout(function(){a.trigger("load")},50):(q(),"function"===typeof b&&b())}).error(function(){n.console&&console.log("Error: "+a)}).attr("src",a);c.prepend(g)}}function v(){c.children(".bs-img-1x").remove();if(1<b.length)d.each(b,function(a,b){a&&k(b,w)});else if("function"===typeof a.onLoad)a.onLoad()}function w(){var f=0;c.children().each(function(){d(this).data("loaded")&&f++});if(f>=b.length){if("function"===
typeof a.onLoad)a.onLoad();setInterval(x,a.wait+a.fade)}}function x(){if("function"===typeof a.onChange)a.onChange();l?c.children(":not(:last)").css({visibility:"hidden"}).end().children(":last").animate({opacity:0},a.fade/2,function(){d(this).prependTo(c).css({visibility:"hidden",opacity:""});c.children(":last").css({opacity:0,visibility:"visible"}).animate({opacity:1},a.fade/2,function(){d(this).css({opacity:""});if("function"===typeof a.onComplete)a.onComplete()})}):c.children(":last").animate({opacity:0},
a.fade,function(){d(this).prependTo(c).css({opacity:""});if("function"===typeof a.onComplete)a.onComplete()})}var s=d(this),r="body"===this.tagName.toLowerCase(),l=a.color,c=d(d.parseHTML(a.template)).css(a.styles).css({position:r?"fixed":"absolute"}).appendTo(s);l&&c.css({backgroundColor:l});a.shuffle&&b.sort(function(){return Math.round(Math.random())-0.5});for(var t=[],h=0;h<b.length;h++)t[h]=b[h].replace("-2x.",".");p.on("resize orientationchange",q);k(t[0],function(){k(b[0],v)});return this})};
d.backgroundStretch2x=function(b,a){d("body").backgroundStretch2x(b,a)}})(jQuery,window);